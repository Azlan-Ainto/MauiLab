<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:models="clr-namespace:MyBasicCollectionView.Models"
    xmlns:vm="clr-namespace:MyBasicCollectionView.ViewModels"
    x:DataType="vm:MainViewModels"
    x:Class="MyBasicCollectionView.MainPage"
    x:Name="RootPage">

    <Grid Padding="10" RowDefinitions="Auto,*" RowSpacing="10">

        <!-- Eingabebereich -->
        <VerticalStackLayout Grid.Row="0" Spacing="10">

            <Label
                Text="Peoples"
                FontSize="20"
                FontAttributes="Bold" />

            <HorizontalStackLayout Spacing="10">

                <Entry
                    Placeholder="Name"
                    Text="{Binding NewPersonName}"
                    WidthRequest="150" />
                <Entry
                    Placeholder="Job"
                    Text="{Binding NewJob}"
                    WidthRequest="150" />

                <Entry
                    Placeholder="Company"
                    Text="{Binding NewPersonCompany}"
                    WidthRequest="150" />

                <Button
                    Text="Add"
                    Command="{Binding AddPersonCommand}" />

            </HorizontalStackLayout>

        </VerticalStackLayout>

        <!-- Liste -->
        <CollectionView
            Grid.Row="1"
            ItemsSource="{Binding Peoples}">

            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="models:Person">

                    <VerticalStackLayout Padding="0,3">

                        <Border
                            Stroke="LightGray"
                            StrokeThickness="1"
                            Padding="6">

                            <Grid ColumnDefinitions="*,*,*,Auto">

                                <Label
                                    Grid.Column="0"
                                    Text="{Binding Name}"
                                    FontSize="15" />
                                <Label
                                    Grid.Column="1"
                                    Text="{Binding Job}"
                                    FontSize="15" />

                                <Label
                                    Grid.Column="2"
                                    Text="{Binding Company}"
                                    FontSize="15" />

                                <Button
                                    Grid.Column="3"
                                    Text="X"
                                    FontAttributes="Bold"
                                    Command="{Binding BindingContext.DeletePersonCommand, Source={x:Reference RootPage}}"
                                    CommandParameter="{Binding Id}" />

                            </Grid>

                        </Border>

                    </VerticalStackLayout>

                </DataTemplate>
            </CollectionView.ItemTemplate>

        </CollectionView>

    </Grid>

</ContentPage>